# DB.19-Credit-Risk-Early-Signal-System

 A lightweight Early Warning System (EWS) to detect credit-card delinquency risk 30–45 days early using behavioral features, a rule-based scoring engine, and ML prototype.

---

## Dataset

- **Dataset Used:** [UCI Credit Card Dataset](https://www.kaggle.com/datasets/uciml/default-of-credit-card-clients-dataset) (`UCI_Credit_Card.csv`)  
- **Size:** 30,000+ customer records with billing history, payment amounts, credit limits, and repayment status.  
- **Target Variable:** `default.payment.next.month` (renamed `default`) — indicates whether a customer defaults next month.

---

## Workflow

The EWS system follows these steps:

1. **Data Input:** Load transactional and billing data for credit card customers.  
2. **Feature Engineering:** Compute behavioral features including:
   - **Utilization ratios** (`bill_amt / limit_bal` for months 4–6)  
   - **Payment ratios** (`pay_amt / bill_amt` for months 4–6)  
   - **Behavioral trends** (`pay_drop`, `util_change`)  
   - **Spend spike** (`bill_amt6 / mean(bill_amt4-6)`)  
   - **Delay trend** (`pay_0 - pay_2`)  
3. **Rule-based ERS Engine:**
   - Assigns scores based on utilization, payment ratio, delay trend, and spend spike.  
   - Categorizes customers into **Low, Medium, High risk** (`ers_flag`).  
4. **ML Model:**
   - Features: `util_6`, `pay_ratio_6`, `delay_trend`, `spike`, `pay_drop`, `util_change`.  
   - Apply **SMOTE** for class balance.  
   - Train **Logistic Regression** and **Random Forest** models.  
   - Predict probability of default and bucket into **Low, Medium, High** (`ml_bucket`).  
5. **Final Risk Decision:**
   - Combine **ERS score** and **ML bucket** into `final_risk`.  
   - If either is High, then High; if either is Medium, then Medium; else Low.  
6. **Alert Generation:**
   - Generate SMS templates for early warnings:
     - Soft reminders  
     - Personal insights  
     - Loss-aversion alerts  
     - Urgent calls  
7. **Visualization:**
   - ERS distribution charts  
   - Projected ERS trend charts  
   - Default probability histogram  
8. **Export High-risk Customers separately:**
   - Save flagged customers to `high_risk_customers.csv`.

---

## Architecture

1. Data Input Layer: Load customer transactional and billing data from CSV.

2. Feature Engineering: Compute utilization, payment ratios, behavioral trends, and spend spikes.

3. Rule-based ERS Engine: Score customers based on risk rules.

4. ML Prediction (optional): Logistic Regression / Random Forest predicts default probabilities.

5. Risk Flagging: Combine ERS score and ML bucket to determine final risk.

6. Alerts & Messaging: Generate SMS templates for high-risk customers.

---
### Results and Visualization

1. Final Credit Risk Distribution

This bar chart shows the distribution of customers classified into Low, Medium, and High final risk levels after combining ERS signals and ML predictions.

<img width="583" height="402" alt="Final Credit Risk Distribution" src="https://github.com/user-attachments/assets/c2581ed4-8704-4c3c-8cd0-e08a4cbf5bf0" />

Interpretation:
- Medium risk group is the largest (~16,900 customers)
- High risk forms the second-largest (~8,500 customers)
- Low risk is the smallest (~4,500 customers)

2. Model Performance (AUC Scores)

The AUC scores compare the predictive strength of both models:
- Logistic Regression AUC: ~0.589
- Random Forest AUC: ~0.839

<img width="471" height="80" alt="LR_RF_Accuracy" src="https://github.com/user-attachments/assets/484aeb1a-f5ac-4b1a-98d1-31a397b3ab07" />

Interpretation:
Random Forest performs significantly better and is more reliable for default prediction. Logistic Regression is weaker due to lower ability to capture nonlinear patterns.

3. Count of Final Risk Categories

This table summarizes the number of customers in each risk segment:

<img width="351" height="264" alt="Risk_Count" src="https://github.com/user-attachments/assets/05e15c38-c85f-4f96-8c74-995d63cd5a36" />

Risk Level	Count
- Medium	16,904
- High	8,521
- Low	4,575

4. Default Probability Distribution

This histogram shows the spread of predicted default probabilities generated by the Random Forest model.

<img width="591" height="463" alt="Default Probability Distribution" src="https://github.com/user-attachments/assets/36336dff-ac33-4bd4-b8f0-490e48b4cedd" />

Interpretation:
- Most customers fall in the low probability range (0.0–0.3)
- A small but important group shows high default probability (>0.7)
- The distribution helps banks set thresholds for early warnings and interventions.

5. SMS Alert Templates (Early Warning Messaging System)

These templates are automatically triggered based on the customer’s risk level, utilization behaviour, and repayment delays.

<img width="1067" height="187" alt="SMS snapshots" src="https://github.com/user-attachments/assets/3668e483-74a9-499b-bd97-0a52100dd8a5" />

Templates Used:
- Soft Reminder: A polite reminder informing the customer about upcoming due dates.
- Insight Message: Provides personalized insights such as high utilization and encourages early payment to reduce interest.
- Loss Warning: Alerts the customer that missing the due date can incur late fees.
- Urgent Risk Alert: Sent to high-risk customers with serious repayment delays, prompting immediate action.

These templates allow the system to deliver alerts that could increase timely repayments and reduce delinquency.
